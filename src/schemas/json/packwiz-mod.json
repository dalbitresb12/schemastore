{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://json.schemastore.org/packwiz-mod.json",
  "title": "mod.pw.toml (packwiz)",
  "description": "A metadata file which references an external file from a URL. This allows for side-only mods, optional mods and stores metadata to allow finding updates from Modrinth and CurseForge. The \"mod\" terminology is used a lot here, but this should work for any file.",
  "type": "object",
  "additionalProperties": false,
  "required": ["download", "filename", "name"],
  "definitions": {
    "download": {
      "title": "Download object",
      "description": "Information about how to download this mod.",
      "type": "object",
      "additionalProperties": false,
      "required": ["hash-format", "hash"],
      "properties": {
        "hash-format": {
          "description": "The hash format for the hash of the specified file.",
          "type": "string",
          "enum": ["sha256", "sha512", "sha1", "md5", "murmur2"]
        },
        "hash": {
          "description": "The hash of the specified file, as a string. Binary hashes should be stored as hexadecimal, and case should be ignored during parsing. Numeric hashes (e.g. Murmur2) should still be stored as a string, to ensure the value is preserved correctly.",
          "type": "string"
        },
        "url": {
          "description": "The URL to download the mod from. An absolute URI compliant with RFC 3986. Can be omitted if `mode` is set to \"metadata:curseforge\".",
          "type": "string"
        },
        "mode": {
          "title": "Mode property",
          "description": "UNDOCUMENTED. Defaults to \"url\" when omitted or empty. Use \"metadata:curseforge\" when downloading from CurseForge.",
          "type": "string",
          "enum": ["url", "metadata:curseforge"],
          "default": "url",
          "x-taplo": {
            "links": {
              "key": "https://github.com/packwiz/packwiz/blob/dffdbc9b809c2aa236588d9fe3af0f10c220c0fa/core/mod.go#L29-L41"
            }
          }
        }
      },
      "x-taplo": {
        "links": {
          "key": "https://packwiz.infra.link/reference/pack-format/mod-toml/#download"
        },
        "initKeys": ["hash-format", "hash", "url"]
      }
    },
    "option": {
      "title": "Option object",
      "description": "Information about the optional state of this mod. When excluded, this indicates that the mod is not optional.",
      "type": "object",
      "additionalProperties": false,
      "required": ["optional"],
      "properties": {
        "optional": {
          "description": "Whether or not the mod is optional. This can be set to false if you want to keep the description but make the mod required.",
          "type": "boolean",
          "default": false
        },
        "default": {
          "description": "If true, the mod will be enabled by default. If false, the mod will be disabled by default. If a pack format does not support optional mods but it does support disabling mods, the mod will be disabled if it defaults to being disabled.",
          "type": "boolean",
          "default": true
        },
        "description": {
          "description": "A description displayed to the user when they select optional mods. This should explain why or why not the user should enable the mod.",
          "type": "string"
        }
      },
      "x-taplo": {
        "links": {
          "key": "https://packwiz.infra.link/reference/pack-format/mod-toml/#option"
        },
        "initKeys": ["optional"]
      }
    },
    "update": {
      "title": "Update object",
      "description": "Information about how to update the download details of this mod with tools. If this object does not exist or there are no defined update sources, the mod will not be automatically updated. If there are multiple defined update sources, one of them will be chosen. The source that is chosen is not defined, so it is therefore dependent on the implementation of the tool (may not be deterministic, so do not rely on one source being chosen over another).",
      "type": "object",
      "additionalProperties": false,
      "required": [],
      "properties": {
        "curseforge": {
          "title": "CurseForge update source",
          "description": "An update source for updating mods downloaded from CurseForge.",
          "type": "object",
          "additionalProperties": false,
          "required": ["file-id", "project-id"],
          "properties": {
            "file-id": {
              "description": "An integer representing the unique file ID of this mod file. This can be used if more metadata needs to be obtained relating to the mod.",
              "type": "number"
            },
            "project-id": {
              "description": "An integer representing the unique project ID of this mod. Updating will retrieve the latest file for this project ID that is valid (correct Minecraft version, release channel, modloader, etc.).",
              "type": "number"
            }
          },
          "x-taplo": {
            "links": {
              "key": "https://packwiz.infra.link/reference/pack-format/mod-toml/#curseforge"
            },
            "initKeys": ["file-id", "project-id"]
          }
        },
        "modrinth": {
          "title": "Modrinth update source",
          "description": "An update source for updating mods downloaded from Modrinth.",
          "type": "object",
          "additionalProperties": false,
          "required": ["mod-id", "version"],
          "properties": {
            "mod-id": {
              "description": "A string representing the unique mod ID of this mod. Updating will retrieve the latest file for this project ID that is valid (correct Minecraft version, release channel, modloader, etc.).",
              "type": "string"
            },
            "version": {
              "description": "A string representing the unique version ID of this file. This can be used if more metadata needs to be obtained relating to the mod.",
              "type": "string"
            }
          },
          "x-taplo": {
            "links": {
              "key": "https://packwiz.infra.link/reference/pack-format/mod-toml/#modrinth"
            },
            "initKeys": ["mod-id", "version"]
          }
        }
      },
      "x-taplo": {
        "links": {
          "key": "https://packwiz.infra.link/reference/pack-format/mod-toml/#update"
        }
      }
    }
  },
  "properties": {
    "download": {
      "$ref": "#/definitions/download"
    },
    "filename": {
      "description": "The destination path of the mod file, relative to this file using forward slashes. Must not reference a file outside the pack root, and should not include characters or filenames restricted on common operating systems.",
      "type": "string"
    },
    "name": {
      "description": "The name of the mod, which can be displayed in user interfaces to identify the mod. It does not need to be unique between mods, although this may cause confusion.",
      "type": "string"
    },
    "option": {
      "$ref": "#/definitions/option"
    },
    "side": {
      "description": "The side on which this mod should be installed. A physical Minecraft side. Server applies to the dedicated server, client applies to the client (and integrated server), and both applies to every installation.",
      "type": "string",
      "enum": ["both", "client", "server"],
      "default": "both"
    },
    "update": {
      "$ref": "#/definitions/update"
    },
    "pin": {
      "title": "Mod pinning",
      "description": "UNDOCUMENTED. Prevents packwiz from updating the mod automatically. Set when using the command `packiwz pin`.",
      "type": "boolean",
      "default": false,
      "x-taplo": {
        "links": {
          "key": "https://github.com/packwiz/packwiz/blob/dffdbc9b809c2aa236588d9fe3af0f10c220c0fa/core/mod.go#L20"
        }
      }
    }
  }
}
